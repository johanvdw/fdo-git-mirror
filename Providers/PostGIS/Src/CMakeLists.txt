include_directories( ${CMAKE_CURRENT_SOURCE_DIR} )

add_subdirectory( Message )
add_subdirectory( Overrides )
add_subdirectory( Provider )

set( PostGISOverrides_LIB_SRCS
	${CMAKE_CURRENT_BINARY_DIR}/dummy.cpp
)

file( WRITE  ${CMAKE_CURRENT_BINARY_DIR}/dummy.cpp "//autogenerated file by cmake\n" )
add_library( PostGISOverrides SHARED ${PostGISOverrides_LIB_SRCS} )

target_link_libraries( PostGISOverrides
	PostGISOverridesSrc
	ProvidersCommon
	FDO
 )

set_target_properties( PostGISOverrides PROPERTIES VERSION ${FDO_VERSION} SOVERSION ${FDO_VERSION_MAJOR} )
install( TARGETS PostGISOverrides DESTINATION ${LIB_INSTALL_DIR} )

set( PostGISProvider_LIB_SRCS
	${CMAKE_CURRENT_BINARY_DIR}/dummy.cpp
)

file( WRITE ${CMAKE_CURRENT_BINARY_DIR}/dummy.cpp "//autogenerated file by cmake\n" )
add_library( PostGISProvider SHARED ${PostGISProvider_LIB_SRCS} )

target_link_libraries( PostGISProvider
	PostGISProviderSrc
	PostGISOverrides
	ProvidersCommon
	FDO
	pq
 )


set_target_properties( PostGISProvider PROPERTIES VERSION ${FDO_VERSION} SOVERSION ${FDO_VERSION_MAJOR} )
install( TARGETS PostGISProvider DESTINATION ${LIB_INSTALL_DIR} )
